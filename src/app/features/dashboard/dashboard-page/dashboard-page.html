<h1>Dashboard</h1>

<div class="grid">
  <mat-card>
    <mat-card-title>Übersicht</mat-card-title>
    <mat-card-content class="stats">
      <div class="stat">
        <div class="label">Patients</div>
        <div class="value">{{ totalPatients }}</div>
      </div>

      <div class="stat">
        <div class="label">Appointments</div>
        <div class="value">{{ totalAppointments }}</div>
      </div>

      <div class="stat">
        <div class="label">Today</div>
        <div class="value">{{ todayAppointments }}</div>
      </div>

      <div class="stat">
        <div class="label">Avg Duration</div>
        <div class="value">{{ avgAppointmentMinutes }} min</div>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="chart-card">
    <mat-card-title>Termine pro Tag (nächste 7 Tage)</mat-card-title>
    <mat-card-content>
      <div class="chart-wrap">
        <canvas #barCanvas></canvas>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="chart-card">
    <mat-card-title>Versicherung</mat-card-title>
    <mat-card-content>
      <div class="chart-wrap">
        <canvas #doughnutCanvas></canvas>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<!-- ✅ Loader Overlay statt *ngIf, damit Canvas nicht zerstört wird -->
<div class="overlay" *ngIf="loading">
  <mat-spinner></mat-spinner>
</div>